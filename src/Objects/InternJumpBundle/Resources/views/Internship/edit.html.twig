{% extends '::base.html.twig' %}
{% block title %}Edit job{% endblock %}

{% block pageTitle %}employers Edit JOB{% endblock %}

{% block stylesheets %}
{{parent()}}
<link href="{{ asset('css/jquery.alerts.css') }}" rel="stylesheet" type="text/css"/>
<link href="{{ asset('css/chosen.css') }}" rel="stylesheet" type="text/css"/>
<link href="{{ asset('css/jquery-ui-1.8.24.custom.css') }}" rel="stylesheet" type="text/css"/>
{% endblock %}

{% block body %}

{% endblock %}


{% block javascripts %}
{{parent()}}

{% set formElementHTML %}
{% spaceless %}
                <div class="newLangauge">
                    <a class="subDelete" href="javascript:void(0);" onclick="deleteSubForm(this);">-</a>
                    <table>
                        <tr>
                            <td>Language</td>
                            <td>{{ form_widget(edit_form.languages.vars.prototype.language,{'attr' : {'class' :  'chzn-select','style' : 'width:310px;'}}) }}</td>
                        </tr>
                        <tr>
                            <td>Spoken</td>
                            <td>{{ form_widget(edit_form.languages.vars.prototype.spokenFluency) }}</td>
                        </tr>
                        <tr>
                            <td>Written</td>
                            <td>{{ form_widget(edit_form.languages.vars.prototype.writtenFluency) }}</td>
                        </tr>
                        <tr>
                            <td>Read</td>
                            <td>{{ form_widget(edit_form.languages.vars.prototype.readFluency) }}</td>
                        </tr>
                    </table>
                </div>
{% endspaceless %}
{% endset %}

        <script>
            //ths part for add / remove langauge form
                    var formElementHTML = '{{ formElementHTML | escape('js') }}';
                    function deleteSubForm(currentElement) {
                        $(currentElement).parent().remove();
                    }

                    ///////////////////////////////////////////

        var jobCity = '{{entity.city}}';
        var jobState = '{{entity.state}}';
        var latitude = '{{entity.Latitude}}';
        var longitude = '{{entity.Longitude}}';
        var no_zipcode_message_new_job_page = '{{no_zipcode_message_new_job_page}}';
        var map_change_location_message = '{{map_change_location_message}}';
        var countryCitiesStatesUrl = '{{url('get_countey_cities_states',{'countryId' : ''})}}';
        var getPositionUrl = '{{url('get_position',{'zipcode' : ''})}}';
        var cityAutoCompleteUrl = "{{ path('city_auto_complete') }}";
        $(document).ready(function(){
            //ths part for add / remove langauge form
                    $('#btnAdd').click(function() {
                        var tempHtml = formElementHTML;
                        var subFormNumbers = [];
                        $('[name^="form[languages]"]').each(function(){
                            subFormNumber = parseInt($(this).attr('name').match(/\d+/)[0]);
                            if($.inArray(subFormNumber, subFormNumbers) == -1) {
                                subFormNumbers.push(subFormNumber);
                            }
                        });
                        $('.langaugesContainer').append(tempHtml.replace(/\$\$name\$\$/g, (subFormNumbers.sort().pop() + 1)));
                        $('#btnDel').removeAttr('disabled');
                    });
                    $('#btnDel').click(function() {
                        if($('.langaugesContainer').children().length == 2) {
                        $('#btnDel').attr('disabled','disabled');
                    }
                    $('.langaugesContainer').children().last().remove();
                    });
                    $('.chzn-select').livequery(function() {
                        $(this).chosen();
                    });

            ////////////////////////////////////////////

            setInterval(function(){
                //Loader Script
                $('#loading').width($('#loading').parent().width());
                $('#loading').height($('#loading').parent().height());
            }, 500);

            $('.activeFrom').datepicker({changeYear: true, yearRange : 'c-0:c+30', dateFormat: 'yy-mm-dd', minDate: new Date()});
            $('.activeTo').datepicker({changeYear: true, yearRange : 'c-0:c+30', dateFormat: 'yy-mm-dd', minDate: new Date()});

            //Function for Choosen >> page of inbox
            $(".chzn-select,#form_activeFrom_year,#form_activeFrom_day,#form_activeFrom_month,#form_activeTo_month,#form_activeTo_day,#form_activeTo_year").chosen();
            $(".chzn-select-deselect").chosen({
                allow_single_deselect:true
            });
           initialize();

           //add ckeditor
                    var editor = CKEDITOR.editor.replace('form_description');
                    $('#submit').click(function(){
                             var content = editor.getData();
                             //set update job description textarea with the ckeditor value
                             $('textarea#form_description').val(content);

                         });
        });
            </script>
            <script src="{{ asset('js/libs/chosen.jquery.min.js') }}"></script>
            <script src="{{ asset('js/libs/jquery-ui-1.8.24.custom.min.js') }}" type="text/javascript"></script>
            <script src="{{asset('bundles/objectsinternjump/js/internShip.js')}}"></script>
            <script src="{{asset('bundles/objectsinternjump/js/newInternShipMap.js')}}"></script>
            <script src="{{asset('bundles/objectsinternjump/js/cityAutoComplete.js')}}"></script>
            <script src="{{ asset('js/libs/jquery.livequery.js') }}" type="text/javascript"></script>
            <script type="text/javascript" src="{{asset('js/ckeditor/ckeditor.js')}}"></script>
{% endblock %}
